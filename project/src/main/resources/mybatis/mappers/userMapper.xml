<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 다른 mapper와 중복되지 않도록 네임스페이스 기재 -->
<mapper namespace="com.example.project.user.service.impl.UserMapper">
	
	<select id="selectUserList" parameterType="map" resultType="map">
		SELECT USER_AUTHKEY
  		  FROM T_USER
  		  <where>
  		      <if test="authKey != null">
  		      	AND USER_AUTHKEY = #{authKey} 
  		      </if>
  		  </where>
	</select>
	
	<insert id="insertUserList" parameterType="UserVO">
		INSERT INTO T_USER (USER_ID, USER_PASSWORD, USER_EMAIL, USER_NICKNAME, USER_AUTHKEY)
                         VALUES (#{userId}, #{password}, #{userEmail}, #{userNickname}, #{authKey})
        
	</insert>
	
	<insert id="insertAuthority" parameterType="UserVO">
        
        INSERT INTO T_AUTHORITIES (USER_ID, AUTHORITY)
                           VALUES (#{userId}, 'IS_AUTHENTICATED_ANONYMOUSLY')
	</insert>
	
	<update id="updateAuthority" parameterType="UserVO">
		UPDATE t_authorities
		   SET AUTHORITY = 'ROLE_USER'
		 WHERE USER_ID = #{userId}
		           
	</update>


	

</mapper>














